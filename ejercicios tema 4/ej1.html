<!DOCTYPE html>
<html lang="es">
	<head>
		<meta charset="UTF-8">
		<title>Ejercicio 1 - XXX</title>

	</head>
	<body>
		<form>
			<h1>QUIZ DOÑANA</h1>
			<p>
				<label>Pregunta 1: ¿Cuál es el número mayor?</label>
				<input type ='number' id="num1" readonly>
				<input type ='number' id="num2" readonly>
				<input type ='number' id="num3" readonly>
				<input type='text' id="num">
			</p>
			<p>
				<label>Pregunta 2: ¿Cuántas horas han pasado?</label>
				<input type='text' id="fech" readonly>
				<input type='text' id="calculo" >
			</p>
			<p>
				<label>TIEMPO</label>
				<input type='number' id="cont">
			</p>
			<input type='button' value="Comprobar" onclick="comprobar();">

			<script type="text/javascript">
				n1 = Math.floor((Math.random()*100)+1)
				num1.value = n1;
				var n2 = Math.floor((Math.random()*100)+1);
				while (n1 == n2) {
					n2 = Math.floor((Math.random()*100)+1);
				}
				num2.value = n2;

				var n3 = Math.floor((Math.random()*100)+1);
				while (n1 == n3 || n2 == n3) {
					n3 = Math.floor((Math.random()*100)+1);
				}
				num3.value = n3;

				var ar = [n1,n2,n3];

				var hoy = new Date();
				var fecha = new Date();
				var ano = hoy.getFullYear();

				var analea = Math.floor((Math.random()*((ano-1970)+1)+1970));

				fecha.setFullYear(analea);

				fech.value = analea;

				cont.value = 59;
				var act = 59;
				var intervalo = setInterval(contador,1000);


				function contador(){
					cont.value -= 1;
					act = cont.value;
					if (act == 0) {
						var nueva = open("ventanita.html","","width=300, height=100, left=1500, top=1000");
						nueva.document.write("La bomba ha explotado");
						clearInterval(intervalo);
					}

				}

				function comprobar(){
					var tiempo = 60-act;
					var res = Math.round((hoy-fecha)/1000/3600);
					var pat = /^[0-9]+$/
					var acier = 0;
					var max = Math.max(...ar);
					if (num.value == max) {
						acier++;
						num.style.background = "green";
					}else {
						num.value = max;
						num.style.background = "red";
					}

					if (calculo.value == res) {
						acier++;
						calculo.style.background = "green";
					}else{
						calculo.value = res;
						calculo.style.background = "red";
					}

					var nueva = open("ventanita.html","","width=300, height=100, left=1500, top=1000");
					nueva.document.write("Ha tardado "+tiempo+" segundos<br/>Has acertado "+acier);
					clearInterval(intervalo);
				}
			</script>
		</form>

	</body>
</html>
